#!/usr/bin/env bash

cpu_usage () {
    echo ""$[100-$(vmstat 1 2|tail -1|awk '{print $19}')]"%"
}

cpu_mhz () {
    echo "$(sysctl dev.cpu.0.freq | awk '{ print $2 }')MHz"
}

cpu_load () {
    echo "$(top -n 1 | head -n 1 | awk '{printf "%s %s %s", $6, $7, $8}')"
}

case $BUTTON in
	1) notify-send "CPU" "CPU Usage: $(cpu_usage)
CPU MHz: $(cpu_mhz)
CPU Load: $(cpu_load)";;
	2) setsid -f "$TERMINAL" -e htop ;;
	3) notify-send "ðŸ–¥ CPU module " "\- Shows CPU details.
- Middle click to open htop." ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

printf "%s" $(cpu_load)
